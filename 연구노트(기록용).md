# 연구노트

**좀 완벽한 파서를 구현해보자.**

* **참고사이트**
  * [셀레니움4 공식문서](https://www.selenium.dev/documentation/webdriver/browsers/chrome/)

* 깃으로 형상관리
  * 보안을 위해 properties같은 파일에 따로 개인정보 기록
  * 보안을 위해 호스팅 서버에서만 동작하도록 리눅스 권한설정(properties 같은파일 접근할때 말함)
    * 이왕이면 url정보도 이렇게 숨기는게 안전할듯
  * 이정도만 하면 충분히 public으로 깃 관리해도 될듯(ㅇ.ㅇ)
* 기존 git-action 사용하던건??
  * 보통 코드 테스트용도로 많이쓰는걸로 아는데 이쪽으로 활용해보자.
  * 예로 그냥 로그인 필요없는 홈페이지 파싱같은건 쓸만하지 않겠나??
  * 정확히 어느정도 테스트에 쓰는지는 공부해보고 사용
* 유연하게 사용할 수 있는 파서가 되도록 구현해보자 -> 추후에 다른 사이트들에도 사용하기 쉽게끔
* 호스팅 서버에 python동작을 cgi로 할거냐 장고로 할거냐?
  * 호스팅 서버에 동작시킬건데 셀레니움으로 파서만 구현할테니까 그냥 cgi 방식으로 python 구동하면 될듯
* 성능개선은 ??
  * **멀티스레드, 멀티프로세스** 적용해서 구현하는걸로 하자
  * **Selenium Grid 4 (Docker Container)**: 하나의 script으로 원격 실행이 가능합니다. Docker의 Container를 사용해서 다수의 가상 머신에 Selenium을 배포하고 실행할 수 있습니다. 
    * 이거는 우선 넘어가고 나중에 도커를 잘 쓰게 될때 다시한번 체크해보자. 셀레니움4의 핵심추가기능

* 스케줄링(crontab) 으로 파서들 관리할 예정 -> 보통 하루 한번만 파싱하면 대부분 충분
  * 만약 자주 파싱해야할수도 있는 그런건 바로 파싱보다는 쿼리날려서 최신께 나왔는지 먼저 확인 필수
* **DB에는 데이터 저장을 할 것인가?? 아니면 xlsx?? -> DB**
  * DB가 개인적으로 관리하기 편해서 DB로 전부 데이터 관리하겠음.
  * 데이터 없는건 add하고 달라진건 update하고 등등 굿굿
* 네이버는 마지막에하고 **다른 사이트들 파싱 먼저!**

  * 단, 멀티스레드나 멀티프로세스 적용하면서 ㄱㄱ
  * 라이브러리도 최신껄로... 문법 무조건 다르니까 참고
  * 자바로할까 고민하긴했는데 보통 파이썬이 파싱하기엔 좋다고 하는듯

<br><br>

## 2023-10-06~07

폴더 구조화(고민), DB 구조화 등

<br>

**DB 설계는??**

* "파싱제품" 
  * 제품 Table {id, 제품명(쓰나모르겠), 모델명, 재고수, 판매상태}
  * 제품_parts Table {id, 외래키(제품), 모델명, 기타} -> "재고"를 제외한 "색깔, 사이즈, 부속품" 등이 더 있을때 기타로 추가!!
    * 제품:제품2 -> 1:N
  * 이렇게하면 재고수를 제외하고 얼마든지 더 DB기록 가능
  * 출력은 어차피 같은 모델 내용들 나열만 하면 됨ㅇㅇ.
* "기존제품"(네이버)
  * 제품_naver Table {id, 모델명, 판매상태, 외래키(제품)}
    * 제품3:제품 -> 1:1
* 단, 제품Table에서 Table명은 해당 파싱사이트 명으로!
  * 어차피 파싱사이트 이름으로 우린 스마트스토어에서 검색해서 수정하고있우니깡
* MySQL 로컬껄로... 진행해보자...
  * ERDCloud 에서 구현후 해당 create 코드 바로 사용해버리자.
  * **[ERDCloud](https://www.erdcloud.com/d/N8nnR7nSiPHhx4BpL)**

* **로컬호스트:3306에 root, 1234 & 디비 : parser**

<br>

폴더 구조화-> 그냥 개발하면서 되는대로 하겠음!

**깃으로 형상관리 -> properties만 구성하고 바로 하겠음 또는 env던지 -> env로 선택**

* .gitignore 을 git이 인식 못하는것 같을때 캐시삭제 후 다시 push

  ```bash
  git rm -r --cached .
  git add .
  git commit -m "fixed untracked files"
  ```

**프로젝트 생성.. -> 아나콘다로 환경설정..**

* `conda install pytz python-dotenv pandas openpyxl lxml selenium requests beautifulsoup4`

